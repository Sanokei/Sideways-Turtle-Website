$(document).ready((function(){mapboxgl.accessToken="pk.eyJ1Ijoic2Fub2tlaSIsImEiOiJjbDh3M2RsNzkwanZqM29vNDduNW52amg5In0.SSwVPJSPg5z-BNhYIufsJQ";const e=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",center:[-73.997457, 40.730823],zoom:16,pitch:45});function i(t){e.rotateTo(t/100%360,{duration:0}),requestAnimationFrame(i)}const t=[Math.PI/2,0,0],s=mapboxgl.MercatorCoordinate.fromLngLat([-73.997457, 40.730823],0),r={translateX:s.x,translateY:s.y,translateZ:s.z,rotateX:t[0],rotateY:t[1],rotateZ:t[2],scale:s.meterInMercatorCoordinateUnits()},l=window.THREE,a={id:"3d-model",type:"custom",renderingMode:"3d",onAdd:function(e,i){this.camera=new l.Camera,this.scene=new l.Scene;const t=new l.AmbientLight(16777215,100);this.scene.add(t);(new l.GLTFLoader).load("https://cdn.glitch.global/ff996a1b-fade-4b92-9204-556d38ecd023/Turtle_Model.glb?v=1664519111621",(e=>{e.scene.scale.multiplyScalar(1.5),this.scene.add(e.scene)})),this.map=e,this.renderer=new l.WebGLRenderer({canvas:e.getCanvas(),context:i,antialias:!0}),this.renderer.autoClear=!1},render:function(e,i){const t=(new l.Matrix4).makeRotationAxis(new l.Vector3(1,0,0),r.rotateX),s=(new l.Matrix4).makeRotationAxis(new l.Vector3(0,1,0),r.rotateY),a=(new l.Matrix4).makeRotationAxis(new l.Vector3(0,0,1),r.rotateZ),d=(new l.Matrix4).fromArray(i),n=(new l.Matrix4).makeTranslation(r.translateX,r.translateY,r.translateZ).scale(new l.Vector3(r.scale,-r.scale,r.scale)).multiply(t).multiply(s).multiply(a);this.camera.projectionMatrix=d.multiply(n),this.renderer.resetState(),this.renderer.render(this.scene,this.camera),this.map.triggerRepaint()}};e.on("style.load",(()=>{e.addLayer(a,"waterway-label")})),e.on("load",(()=>{i(0);const t=e.getStyle().layers;for(const i of t)"symbol"===i.type&&i.layout["text-field"];e.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,10,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}})}));var d=!0,n=null;if($(this).on("mousewheel DOMMouseScroll",(function(e){if(!$(".outer-nav").hasClass("is-vis")){e.preventDefault();var i=e.originalEvent.wheelDelta?-e.originalEvent.wheelDelta:20*e.originalEvent.detail;i>50&&d?(d=!1,clearTimeout(n),n=setTimeout((function(){d=!0}),800),c(1)):i<-50&&d&&(d=!1,clearTimeout(n),n=setTimeout((function(){d=!0}),800),c(-1))}})),$(".side-nav li, .outer-nav li").click((function(){if(!$(this).hasClass("is-active")){var e=$(this),i=e.parent().find(".is-active"),t=e.parent().children().mousedown().index(i),s=e.parent().children().index(e),r=$(this).parent().children().length-1;v(s),h(t,s,r)}})),$(".next-tele").click((function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),t=$(".side-nav").children().length-4,s=t;v(t),h(i,s,t);$(this);var r=$(".slider").find(".slider--item-left"),l=$(".slider").children().index(r),a=$(".slider").find(".slider--item-center"),d=$(".slider").children().index(a),n=$(".slider").find(".slider--item-right"),m=$(".slider").children().index(n),o=$(".slider").children().length,c=$(".slider--item-left"),C=$(".slider--item-center"),f=$(".slider--item-right"),u=$(".slider--item");l<o-1&&d<o-1&&m<o-1?(c.removeClass("slider--item-left").next().addClass("slider--item-left"),C.removeClass("slider--item-center").next().addClass("slider--item-center"),f.removeClass("slider--item-right").next().addClass("slider--item-right")):l===o-1?(u.removeClass("slider--item-left").first().addClass("slider--item-left"),C.removeClass("slider--item-center").next().addClass("slider--item-center"),f.removeClass("slider--item-right").next().addClass("slider--item-right")):d===o-1?(c.removeClass("slider--item-left").next().addClass("slider--item-left"),u.removeClass("slider--item-center").first().addClass("slider--item-center"),f.removeClass("slider--item-right").next().addClass("slider--item-right")):(c.removeClass("slider--item-left").next().addClass("slider--item-left"),C.removeClass("slider--item-center").next().addClass("slider--item-center"),u.removeClass("slider--item-right").first().addClass("slider--item-right"))})),$(".prev-tele").click((function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),t=$(".side-nav").children().length-4,s=t;v(t),h(i,s,t);$(this);var r=$(".slider").find(".slider--item-left"),l=$(".slider").children().index(r),a=$(".slider").find(".slider--item-center"),d=$(".slider").children().index(a),n=$(".slider").find(".slider--item-right"),m=$(".slider").children().index(n),o=($(".slider").children().length,$(".slider--item-left")),c=$(".slider--item-center"),C=$(".slider--item-right"),f=$(".slider--item");0!==l&&0!==d&&0!==m?(o.removeClass("slider--item-left").prev().addClass("slider--item-left"),c.removeClass("slider--item-center").prev().addClass("slider--item-center"),C.removeClass("slider--item-right").prev().addClass("slider--item-right")):0===l?(f.removeClass("slider--item-left").last().addClass("slider--item-left"),c.removeClass("slider--item-center").prev().addClass("slider--item-center"),C.removeClass("slider--item-right").prev().addClass("slider--item-right")):0===d?(o.removeClass("slider--item-left").prev().addClass("slider--item-left"),f.removeClass("slider--item-center").last().addClass("slider--item-center"),C.removeClass("slider--item-right").prev().addClass("slider--item-right")):(o.removeClass("slider--item-left").prev().addClass("slider--item-left"),c.removeClass("slider--item-center").prev().addClass("slider--item-center"),f.removeClass("slider--item-right").last().addClass("slider--item-right"))})),$(".tele").click((function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),t=$(".side-nav").children().length-4,s=t;v(t),h(i,s,t)})),$(".cta").click((function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),t=$(".side-nav").children().length-1,s=t;v(t),h(i,s,t)})),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var m=document.getElementById("viewport"),o=new Hammer(m);o.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),o.on("swipeup swipedown",(function(e){c(e)}))}function c(e){var i=$(".side-nav").find(".is-active"),t=$(".side-nav").children().index(i),s=$(".side-nav").children().length-1,r=0;"swipeup"===e.type||40===e.keyCode||e>0?t!==s?(v(r=t+1),h(t,r,s)):(v(r),h(t,r,s)):("swipedown"===e.type||38===e.keyCode||e<0)&&(0!==t?(v(r=t-1),h(t,r,s)):(v(r=s),h(t,r,s)))}function v(e){$(".side-nav, .outer-nav").children().removeClass("is-active"),$(".side-nav").children().eq(e).addClass("is-active"),$(".outer-nav").children().eq(e).addClass("is-active")}function h(e,i,t){$(".main-content").children().removeClass("section--is-active"),$(".main-content").children().eq(i).addClass("section--is-active"),$(".main-content .section").children().removeClass("section--next section--prev"),e===t&&0===i||0===e&&i===t?$(".main-content .section").children().removeClass("section--next section--prev"):e<i?$(".main-content").children().eq(e).children().addClass("section--next"):$(".main-content").children().eq(e).children().addClass("section--prev"),0!==i&&i!==t?$(".header--cta").addClass("is-active"):$(".header--cta").removeClass("is-active")}$(document).keyup((function(e){$(".outer-nav").hasClass("is-vis")||(e.preventDefault(),c(e))})),$(".header--nav-toggle").click((function(){$(".perspective").addClass("perspective--modalview"),setTimeout((function(){$(".perspective").addClass("effect-rotate-left--animate")}),25),$(".outer-nav, .outer-nav li, .outer-nav--return").addClass("is-vis")})),$(".outer-nav--return, .outer-nav li").click((function(){$(".perspective").removeClass("effect-rotate-left--animate"),setTimeout((function(){$(".perspective").removeClass("perspective--modalview")}),400),$(".outer-nav, .outer-nav li, .outer-nav--return").removeClass("is-vis")})),$(".slider--prev, .slider--next").click((function(){var e=$(this),i=$(".slider").find(".slider--item-left"),t=$(".slider").children().index(i),s=$(".slider").find(".slider--item-center"),r=$(".slider").children().index(s),l=$(".slider").find(".slider--item-right"),a=$(".slider").children().index(l),d=$(".slider").children().length,n=$(".slider--item-left"),m=$(".slider--item-center"),o=$(".slider--item-right"),c=$(".slider--item");$(".slider").animate({opacity:0},400),setTimeout((function(){e.hasClass("slider--next")?t<d-1&&r<d-1&&a<d-1?(n.removeClass("slider--item-left").next().addClass("slider--item-left"),m.removeClass("slider--item-center").next().addClass("slider--item-center"),o.removeClass("slider--item-right").next().addClass("slider--item-right")):t===d-1?(c.removeClass("slider--item-left").first().addClass("slider--item-left"),m.removeClass("slider--item-center").next().addClass("slider--item-center"),o.removeClass("slider--item-right").next().addClass("slider--item-right")):r===d-1?(n.removeClass("slider--item-left").next().addClass("slider--item-left"),c.removeClass("slider--item-center").first().addClass("slider--item-center"),o.removeClass("slider--item-right").next().addClass("slider--item-right")):(n.removeClass("slider--item-left").next().addClass("slider--item-left"),m.removeClass("slider--item-center").next().addClass("slider--item-center"),c.removeClass("slider--item-right").first().addClass("slider--item-right")):0!==t&&0!==r&&0!==a?(n.removeClass("slider--item-left").prev().addClass("slider--item-left"),m.removeClass("slider--item-center").prev().addClass("slider--item-center"),o.removeClass("slider--item-right").prev().addClass("slider--item-right")):0===t?(c.removeClass("slider--item-left").last().addClass("slider--item-left"),m.removeClass("slider--item-center").prev().addClass("slider--item-center"),o.removeClass("slider--item-right").prev().addClass("slider--item-right")):0===r?(n.removeClass("slider--item-left").prev().addClass("slider--item-left"),c.removeClass("slider--item-center").last().addClass("slider--item-center"),o.removeClass("slider--item-right").prev().addClass("slider--item-right")):(n.removeClass("slider--item-left").prev().addClass("slider--item-left"),m.removeClass("slider--item-center").prev().addClass("slider--item-center"),c.removeClass("slider--item-right").last().addClass("slider--item-right"))}),400),$(".slider").animate({opacity:1},400)})),$(".work-request--information input").focusout((function(){""===$(this).val()?$(this).removeClass("has-value"):$(this).addClass("has-value"),window.scrollTo(0,0)}))}));